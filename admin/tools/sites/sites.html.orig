<html>
   <head>
      <title>Pimp.Net Web Server Administration</title>
      <script language="JavaScript">
         var curUser = '#user#';
         #refresh#
         function doSave() {
            frm = document.forms[0];
	    cur = frm.exec.value;

	    if (cur != 'new') {
	       frm.exec.value = 'update';
	    }
	    setTimeout('document.forms[0].submit();', 150);
	 }
	 function doDelete() {
	    var OK = confirm("Are you sure you want to delete this\nentry from ALL web and dns servers?");
	    if (OK) {
	       document.forms[0].exec.value = 'delete';
	       setTimeout("document.forms[0].submit();", 150);
	       return true;
	    } else {
	       return false;
	    }
	 }   
         function doNew() {
            frm = document.forms[0];
	    frm.exec.value = 'new';
	    frm.Host.value = 'www';
	    frm.Domain.value = '';
	    frm.ServerRoot.value = '#user_home#';
	    frm.DocumentRoot.value = 'www';
	    frm.ScriptAlias.value = '';
	    frm.Port.value = '80';
	    frm.Type.selectedIndex = 1;
	    frm.CustomLog.value = 'logs/www-access.log';
	    frm.ErrorLog.value = 'logs/www-error.log';
	    frm.user.value = '#REMOTE_USER#';
	    frm.Domain.focus();
            
	    return true;
	 }
	 function updateRoot() {
	    var frm = document.forms[0];
	    var host = frm.Host.value;
	    frm.ServerRoot.value = frm.ServerRoot.value + '/domains/' + frm.Domain.value;
       frm.DocumentRoot.value = frm.Host.value;
	    frm.CustomLog.value = 'logs/'+host+'-access.log';
	    frm.ErrorLog.value = 'logs/'+host+'-error.log';

	    return true;
	 }   
      </script>
      <style type="text/css">
            BODY {
               font-size:11px;
               font-family:Arial,Helvetica,SansSerif;
               color:#000000;
            }
            .HEADER {
               font-size:14px;
	            font-weight:bold;
               font-family:Arial,Helvetica,SansSerif;
               color:#ffffff;
            }
            .FIELD {
               font-size:12px;
               font-family:Arial,Helvetica,SansSerif;
               color:#000000;
            }
	         .MAIN {
               font-size:11px;
               font-family:Arial,Helvetica,SansSerif;
               color:#000000;
            }
            .FIXED {
               font-size:11px;
               font-family:Courier New,Courier,LucidaConsole,Fixedsys;
               color:#000000;
            }
      </style>
   </head>
   <body bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#000099" alink="#ff0000" class="MAIN" onLoad="#alert#">
      <form name="sites" action="index.cgi" method="POST">
         <input type="hidden" name='LogType' value='combined'>
         <input type="hidden" name="exec" value="">
         <input type="hidden" name="REMOTE_USER" value="#REMOTE_USER#">
	 <br>
         <center>
           <table border="1" cellpadding="4" cellspacing="1" bgcolor="#d0d0d0">
	      <tr>
	         <td colspan='2' bgcolor="#880088"><!--<img src="/img/bulb-logo.gif" align='left'>--><span class='HEADER'>Pimp.Net Apache Webhost Tool</span></td>
	      </tr>
	      <tr>
	         <td valign='top'>
		    <table border='0' cellpadding='3' cellspacing='1'>
		       <tr>
	                  <td valign="top" align="right" class="MAIN"><span class='FIELD'>Websites:</span></td>
		          <td valign="top">
		             <select name="DomainID" size="22" onChange="document.sites.submit();" class='MAIN'>
		                #sites#
		             </select>
		          </td>
               	          <td valign="top"><input type="button" value="New" style='width:75px;' onClick="doNew();" class='MAIN'><br>
			  <input type='button' value=' Delete ' onClick="doDelete();" style='width:75px;' class='MAIN'>	     
			  </td>   
		       </tr>
		       <tr>
		          <td align='right' class='MAIN' colspan='2'><span class='MAIN'>* Denotes secure webserver</span></td>
		       </tr>	  
		    </table>
		 </td>
		 <td valign='top'>
		    <table border='0' cellpadding='3' cellspacing='1'>
                       <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Host Name:</span></td>
		          <td class="MAIN"><input type="text" name="Host" value="#Host#" size="25" class='MAIN' onChange="updateRoot();"></td>
                       </tr>
                       <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Domain Name:</span></td>
		          <td class="MAIN"><input type="text" name="Domain" value="#Domain#" size="50" tabindex='1' class='MAIN' onChange="updateRoot();"></td>
                       </tr>
	               <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Server Root:</span></td>
		          <td class="MAIN"><input type="text" name="ServerRoot" value="#ServerRoot#" size="50" class='MAIN'></td>
                       </tr>
	               <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Document Root:</span></td>
		          <td class="MAIN"><input type="text" name="DocumentRoot" value="#DocumentRoot#" size="50" class='MAIN'></td>
                       </tr>
                       <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>CGI Directory:</span></td>
		          <td class="MAIN"><input type="text" name="ScriptAlias" value="#ScriptAlias#" size="30" class='MAIN'>[Optional]</td>
                       </tr>
	               <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Access Log:</span></td>
		          <td class="MAIN"><input type="text" name="CustomLog" value="#CustomLog#" size="50" class='MAIN'></td>
                       </tr>
	               <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Error Log:</span></td>
		          <td class="MAIN"><input type="text" name="ErrorLog" value="#ErrorLog#" size="50" class='MAIN'></td>
                       </tr>
	               <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>User:</span></td>
		          <td class="MAIN"><input type="text" name="user" value="#user#" size="20" class='MAIN'>&nbsp;&nbsp;&nbsp;&nbsp;<span class='FIELD'>Status:</span> &nbsp;&nbsp;<span class='MAIN'>#status#</span></td>
                       </tr>
	               <tr>
		          <td align="right" class="MAIN"><span class='FIELD'>Test URL:</span></td>
		          <td class="MAIN"><a href="#URL#/env.cgi" target='test'>#URL#/env.cgi</a>&nbsp;&nbsp;&nbsp;&nbsp;<span class='FIELD'><input type='checkbox' name='Active' value='1'#Active#> Active</span></td>
                       </tr>
		       <tr><td colspan='2'><hr size='1' style='height:1px;'></td></tr>
                       <tr>
		          <td colspan='2' class="MAIN">
			     <table width='100%' border='0' cellpadding='2' cellspacing='0'>
			        <tr>
				   <td align='right' class='MAIN'><span class='FIELD'>IP Address:</span></td>
		                   <td class="MAIN" colspan='3'><input type="text" name="IP" value="#IP#" size="20" class='MAIN'></td>
				</tr>
				<tr>
				   <td align='right' class='MAIN'><span class='FIELD'>Type:</span></td>
		         <td class="MAIN"><select name='ServerType' onchange="if (this.options[this.selectedIndex].value=='standard') { document.forms[0].Port.value='80'; } else { document.forms[0].Port.value ='443'; }"><option value='standard'#Type_standard#>Standard</option><option value='secure'#Type_secure#>Secure</option></select></td>
				   <td align='right' class='MAIN'><span class='FIELD'>Port:</span></td>
		                   <td class="MAIN"><input type="text" name="Port" value="#Port#" size="5" class='MAIN'></td>
				</tr>   
                             </table>
			  </td>   
                       </tr>
	               <tr>
		          <td align="right" colspan="2"><input type="button" value="Save" tabindex='2' style='width:75px;' onClick="doSave();" class='MAIN'></td>
                       </tr>
                    </table>
		 </td>
	      </tr>
           </table>
	 </center>   
      </form>
   </body>
</html>

